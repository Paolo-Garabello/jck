import{s as H,n as j,r as Z}from"./scheduler.DbuCXXLn.js";import{S as W,i as z,e as _,f as O,s as y,g as q,h as S,j as P,k as U,l as k,r as D,q as n,n as $,o as i,u as I,v as B,p as ee,c as G,a as K,m as Q,t as V,b as X,d as Y}from"./index.TDUkrpct.js";import{g as te,N as se}from"./Notifications.BBwSnBjO.js";import{g as oe}from"./entry.Cippq3Bt.js";function re(r){let s,e,t,a,l,c,u="Username",T,f,v,d,A="Password",C,o,g,w,E,L,b,N,x,F;return{c(){s=_("main"),e=_("form"),t=_("h1"),a=O(r[4]),l=y(),c=_("label"),c.textContent=u,T=y(),f=_("input"),v=y(),d=_("label"),d.textContent=A,C=y(),o=_("input"),g=y(),w=_("button"),E=O(r[4]),L=y(),b=_("a"),N=O(r[1]),this.h()},l(h){s=q(h,"MAIN",{class:!0});var p=S(s);e=q(p,"FORM",{class:!0});var m=S(e);t=q(m,"H1",{class:!0});var J=S(t);a=P(J,r[4]),J.forEach(U),l=k(m),c=q(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(c)!=="svelte-1wr0xay"&&(c.textContent=u),T=k(m),f=q(m,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),v=k(m),d=q(m,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),D(d)!=="svelte-pepa0a"&&(d.textContent=A),C=k(m),o=q(m,"INPUT",{type:!0,placeholder:!0,id:!0,class:!0}),g=k(m),w=q(m,"BUTTON",{type:!0,class:!0});var M=S(w);E=P(M,r[4]),M.forEach(U),L=k(m),b=q(m,"A",{href:!0,class:!0});var R=S(b);N=P(R,r[1]),R.forEach(U),m.forEach(U),p.forEach(U),this.h()},h(){n(t,"class","svelte-1rqughq"),n(c,"for","username"),n(c,"class","svelte-1rqughq"),n(f,"type","text"),n(f,"placeholder","Username"),n(f,"id","username"),f.required=!0,n(f,"class","svelte-1rqughq"),n(d,"for","password"),n(d,"class","svelte-1rqughq"),n(o,"type","password"),n(o,"placeholder","Password"),n(o,"id","password"),o.required=!0,n(o,"class","svelte-1rqughq"),n(w,"type","submit"),n(w,"class","svelte-1rqughq"),n(b,"href",r[0]),n(b,"class","svelte-1rqughq"),n(e,"class","svelte-1rqughq"),n(s,"class","svelte-1rqughq")},m(h,p){$(h,s,p),i(s,e),i(e,t),i(t,a),i(e,l),i(e,c),i(e,T),i(e,f),I(f,r[2]),i(e,v),i(e,d),i(e,C),i(e,o),I(o,r[3]),i(e,g),i(e,w),i(w,E),i(e,L),i(e,b),i(b,N),x||(F=[B(f,"input",r[8]),B(o,"input",r[9]),B(e,"submit",r[5])],x=!0)},p(h,[p]){p&4&&f.value!==h[2]&&I(f,h[2]),p&8&&o.value!==h[3]&&I(o,h[3]),p&2&&ee(N,h[1]),p&1&&n(b,"href",h[0])},i:j,o:j,d(h){h&&U(s),x=!1,Z(F)}}}function ae(r,s,e){let{requestType:t}=s,{goToUrl:a}=s,{goToText:l}=s,{websocket:c}=s,u="",T="",f=t.charAt(0).toUpperCase()+t.slice(1);const{addNotification:v}=te();c.addEventListener("message",()=>{let o=sessionStorage.getItem("websocket.message");if(!o)return;const g=JSON.parse(o);g.statusCode===200&&(sessionStorage.removeItem("websocket.message"),v({text:"Login Successful",type:"success",position:"bottom-right",removeAfter:1e3}),localStorage.setItem("user",JSON.stringify({username:g.data.username,id:g.data.id})),localStorage.setItem("logged","true"),oe("/dm")),(g.statusCode===401||g.statusCode===409)&&(sessionStorage.removeItem("websocket.message"),v({text:g.data.error,type:"error",position:"bottom-right",removeAfter:4e3})),g.statusCode===201&&(sessionStorage.removeItem("websocket.message"),v({text:g.data.message,type:"success",position:"bottom-right",removeAfter:3e3}))});function d(o){o.preventDefault(),c.send(JSON.stringify({request:t,userInfo:{username:u,password:T}})),e(2,u=""),e(3,T="")}function A(){u=this.value,e(2,u)}function C(){T=this.value,e(3,T)}return r.$$set=o=>{"requestType"in o&&e(6,t=o.requestType),"goToUrl"in o&&e(0,a=o.goToUrl),"goToText"in o&&e(1,l=o.goToText),"websocket"in o&&e(7,c=o.websocket)},[a,l,u,T,f,d,t,c,A,C]}class ne extends W{constructor(s){super(),z(this,s,ae,re,H,{requestType:6,goToUrl:0,goToText:1,websocket:7})}}function le(r){let s,e;return s=new ne({props:{requestType:r[0],goToUrl:r[1],goToText:r[2],websocket:r[3]}}),{c(){G(s.$$.fragment)},l(t){K(s.$$.fragment,t)},m(t,a){Q(s,t,a),e=!0},p(t,a){const l={};a&1&&(l.requestType=t[0]),a&2&&(l.goToUrl=t[1]),a&4&&(l.goToText=t[2]),a&8&&(l.websocket=t[3]),s.$set(l)},i(t){e||(V(s.$$.fragment,t),e=!0)},o(t){X(s.$$.fragment,t),e=!1},d(t){Y(s,t)}}}function ue(r){let s,e;return s=new se({props:{$$slots:{default:[le]},$$scope:{ctx:r}}}),{c(){G(s.$$.fragment)},l(t){K(s.$$.fragment,t)},m(t,a){Q(s,t,a),e=!0},p(t,[a]){const l={};a&31&&(l.$$scope={dirty:a,ctx:t}),s.$set(l)},i(t){e||(V(s.$$.fragment,t),e=!0)},o(t){X(s.$$.fragment,t),e=!1},d(t){Y(s,t)}}}function ie(r,s,e){let{requestType:t}=s,{goToUrl:a}=s,{goToText:l}=s,{websocket:c}=s;return r.$$set=u=>{"requestType"in u&&e(0,t=u.requestType),"goToUrl"in u&&e(1,a=u.goToUrl),"goToText"in u&&e(2,l=u.goToText),"websocket"in u&&e(3,c=u.websocket)},[t,a,l,c]}class he extends W{constructor(s){super(),z(this,s,ie,ue,H,{requestType:0,goToUrl:1,goToText:2,websocket:3})}}export{he as A};
